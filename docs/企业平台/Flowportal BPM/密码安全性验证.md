---
title: 密码安全性验证
---

## 整体密码安全性验证策略

### 进行密码安全性验证的位置

1. 登录时
2. 用户自己修改密码时
3. 管理员修改密码时

后两者可能有点多余,因为无论如何修改成简单密码,在登录时都会进行验证.

### 进行密码安全性验证的项目

1. 密码复杂度验证
2. 上次密码修改时间
3. 简单密码过滤

## 桌面网页端登录时进行密码安全性验证

### 桌面网页端登录相关页面和逻辑

相关的页面主要有:

* WEB/YZSoft/Login/2018/Default.aspx 页面布局
* WEB/YZSoft/Login/2018/Default.aspx.cs 服务器端处理代码
* WEB/YZSoft/Login/2018/js/login.js 页面前端js代码

其中2018目录指的是主题样式,目前有2018与classic两种,两种样式的登录页面不仅页面样式不同,
相关的代码差别很大,都需要单独处理.

整体的思路为:

1. 输入账号密码触发登录事件,将用户名密码传入服务端处理,在服务器端验证密码正确后,进行密码安全性的检查.
2. 如果检查通过,则正常处理,返回登录成功状态;如果检查没通过,则需要退出登录状态,同时返回登录失改信息,并附加
登录失改原因.
3. 前台收到返回的状态后,如果登录成功,则进行重定向,打开首页;如果失败,则显示失败的原因,是复杂度
不够还是太长时间未修改.同时弹出修改密码的对话框,要求输入新密码与确认密码.
4. 前端页验证密码复杂度和避免简单密码的要求,避免传入后台再做验证.
4. 输入新密码与确认密码后,触发修改密码事件,将用户名 旧密码 新密码 确认密码传入服务端处理.
5. 服务端先确认用户名和旧密码是否正确,防止被恶意调用.然后进行密码修改.

### 密码复杂度验证的方法

使用正则进行判断

```cs
//检查密码复杂度
Regex regex = new Regex(@"
(?=.*[0-9])                     #必须包含数字
(?=.*[a-zA-Z])                  #必须包含小写或大写字母
(?=([\x21-\x7e]+)[^a-zA-Z0-9])  #必须包含特殊符号
.{6,30}                         #至少6个字符，最多30个字符
", RegexOptions.Multiline | RegexOptions.IgnorePatternWhitespace);
```


